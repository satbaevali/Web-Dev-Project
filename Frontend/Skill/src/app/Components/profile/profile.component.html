<div class="profile-header">
  <a routerLink="/home" class="back-home">
    <h3 class="logo">SkillWay</h3>
  </a>
</div>
<div class="profile-container">
  <ng-container *ngIf="!editMode; else editTpl">
    <h2>Профиль</h2><hr>
    <p><strong>Имя:</strong> {{user.first_name}} {{user.last_name}}</p>
    <p><strong>Email:</strong> {{user.email}}</p>
    <p><strong>Навык:</strong> {{ user.skill?.name || '—' }}</p>
    <p><strong>Bio:</strong> {{user.bio || '—'}}</p>
    <img *ngIf="user.profile_picture" [src]="user.profile_picture" width="120" style="border-radius:8px;"/>
    <button (click)="editMode=true">Редактировать</button>
  </ng-container>


  <div class="profile-actions">
    <button class="btn-logout" (click)="logout()">Выйти из аккаунта</button>
  </div>

  <ng-template #editTpl>
    <h2>Редактировать профиль</h2>
    <form (ngSubmit)="updateProfile()">
      <!-- поля как раньше, плюс select для skill -->
      <div>
        <label>Навык:</label>
        <select
          (change)="onSkillChange($any($event.target).value)"
          [value]="user.skill?.id"
        >
          <option *ngFor="let c of allCategories" [value]="c.id">{{c.name}}</option>
        </select>
      </div>
      <!-- поле фото -->
      <div>
        <label>Фото:</label>
        <input type="file" (change)="onFileSelected($event)"/>
      </div>
      <div *ngIf="previewUrl"><img [src]="previewUrl" width="100"/></div>
      <div *ngIf="errorMessage" class="error-message">{{errorMessage}}</div>
      <button type="submit">Сохранить</button>
      <button type="button" (click)="editMode=false">Отмена</button>
    </form>
  </ng-template>

</div>
